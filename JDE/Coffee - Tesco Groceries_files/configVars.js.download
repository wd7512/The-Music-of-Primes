!function(){var dLGlobalFuncs=gtmDataLayer.get("dLGlobalFuncs"),fpcdp=dLGlobalFuncs.fpcdp(),isDebugMode=dLGlobalFuncs.isDebugMode();_gtm.sessionStorage.get("clickedItemStored")&&_gtm.sessionStorage.remove("clickedItemStored"),_gtm.sessionStorage.get("clickedEngineStored")&&_gtm.sessionStorage.remove("clickedEngineStored"),_gtm.sessionStorage.get("clickedTypeStored")&&_gtm.sessionStorage.remove("clickedTypeStored");var dLPlatformFuncsObj={countryAA:function(){var domain=document.location.host,domainList={"potravinydomov.itesco.sk":"SK","ezakupy.tesco.pl":"PL","bevasarlas.tesco.hu":"HU","nakup.itesco.cz/groceries":"CZ","shoponline.tescolotus.com":"TH","eshop.tesco.com.my":"MY","www.tesco.com":"UK","www-ppe.tesco.com":"UK","s.itesco.sk":"SK","s.tesco.pl":"PL","s.tesco.hu":"HU","nakup.itesco.cz":"CZ","s.tescolotus.com":"TH","s.tesco.com.my":"MY","r.tesco.com.my":"MY","m.tesco.com":"UK","ci-sk.ngbeta.net":"SK","ci-pl.ngbeta.net":"PL","ci-hu.ngbeta.net":"HU","ci-cz.ngbeta.net":"CZ","ci-th.ngbeta.net":"TH","ci-my.ngbeta.net":"MY","ci-uk.ngbeta.net":"UK","ppe1-sk.ngbeta.net":"SK","ppe1-pl.ngbeta.net":"PL","ppe1-hu.ngbeta.net":"HU","ppe1-cz.ngbeta.net":"CZ","ppe1-th.ngbeta.net":"TH","ppe1-my.ngbeta.net":"MY","ppe1-uk.ngbeta.net":"UK","ppe2-sk.ngbeta.net":"SK","ppe2-pl.ngbeta.net":"PL","develop-pl.ppe1.ngbeta.net":"PL","ppe2-hu.ngbeta.net":"HU","ppe2-cz.ngbeta.net":"CZ","ppe2-th.ngbeta.net":"TH","ppe2-my.ngbeta.net":"MY","ppe2-uk.ngbeta.net":"UK","develop-uk.ppe1.ngbeta.net":"UK","prodtest-woodstock-uk.ngbeta.net":"UK","frelease-sirius-analytics-uk.ppe1.ngbeta.net":"UK"};return domainList[domain]?domainList[domain]:gtmDataLayer.get("siteData.busSiteCountry")},filterSortArray:function(){if(null==_gtm.getQueryParam("viewAll")&&null==_gtm.getQueryParam("sortBy"))return"";var filterArray=null==_gtm.getQueryParam("viewAll")?"":_gtm.getQueryParam("viewAll").split(","),sortParameter=_gtm.getQueryParam("sortBy"),v147Array=["category:false","brand:false","sort:default","promo:false","fav:false","new:false","dietary:false"],v239=v147=v161=v238=null;for(i=0;i<filterArray.length;i++)switch(filterArray[i]){case"department":case"aisle":v147Array[0]="category:true",v239=null==_gtm.getQueryParam("department")?"":_gtm.getQueryParam("department").toLowerCase(),v239+=null==_gtm.getQueryParam("aisle")?"":"|"+_gtm.getQueryParam("aisle").toLowerCase(),v239+=null==_gtm.getQueryParam("shelf")?"":"|"+_gtm.getQueryParam("shelf").toLowerCase();break;case"brand":v147Array[1]="brand:true",v238=_gtm.getQueryParam("brand").split(",").join("|").toLowerCase();break;case"promotion":v147Array[3]="promo:true";break;case"favourites":v147Array[4]="fav:true";break;case"new":v147Array[5]="new:true";break;case"dietary":v147Array[6]="dietary:true",v161=_gtm.getQueryParam("dietary").toLowerCase()}return"priceDescending"==sortParameter?v147Array[2]="sort:high to low":"priceAscending"==sortParameter&&(v147Array[2]="sort:low to high"),v147=v147Array.join("|"),{v147:v147,v161:v161,v238:v238,v239:v239}},getSiteName:function(){var appConsumerAA=dLPlatformFuncsObj.appConsumerAA(),appPropAA=dLPlatformFuncsObj.appPropAA(),countryAA=dLPlatformFuncsObj.countryAA();return siteName="",siteName="UK"===countryAA?"ghs:"+countryAA:"ighs:"+countryAA,appPropAA?siteName=appPropAA:"mca-th"==appConsumerAA&&(siteName="mca:"+countryAA),siteName},appPropAA:function(){var cleanParam;return _gtm.getQueryParam("appprop")?(cleanParam=_gtm.getQueryParam("appprop").replace(/\+/g," "),_gtm.setCookie(encodeURIComponent(cleanParam),fpcdp,"s_app_property")):cleanParam=(cleanParam=_gtm.getCookie("s_app_property"))&&decodeURIComponent(cleanParam),cleanParam||null},appConsumerAA:function(){var consumer=_gtm.getQueryParam("consumer");return consumer?_gtm.setCookie(encodeURIComponent(consumer),fpcdp,"s_app_consumer"):consumer=document.documentElement.getAttribute("data-consumer")?document.documentElement.getAttribute("data-consumer"):(consumer=_gtm.getCookie("s_app_consumer"))&&decodeURIComponent(consumer),consumer},rsids:function(){var appprop,countryAA=dLPlatformFuncsObj.countryAA(),appPropAA=dLPlatformFuncsObj.appPropAA(),rsids="tescointgroceriesdev",siteApplication=gtmDataLayer.get("siteData.busSiteApplication"),dataEnvironment=document.documentElement.getAttribute("data-environment");return 0==isDebugMode?"prd"==siteApplication||"live"==dataEnvironment||"container"==dataEnvironment?(rsids="UK"===countryAA?"tescoukgroceriesprod":"tescointgroceriesprod,"+{PL:"tescoINTGroceriesPOL",CZ:"tescoINTGroceriesCZE",SK:"tescoINTGroceriesSVK",HU:"tescoINTGroceriesHUN",MY:"tescoINTGroceriesMAS",TH:"tescoINTGroceriesTHA",UK:"tescoukgroceriesprod"}[countryAA],(appprop=appPropAA?appPropAA.split(":"):null)&&-1<appprop.indexOf("prodtest")&&(rsids="UK"===countryAA?"tescoukgroceriesdev":"tescointgroceriesdev")):"stg"==siteApplication||"ci"==siteApplication||"ppe"==siteApplication?rsids="UK"===countryAA?"tescoukgroceriesdev":"tescointgroceriesdev":location.hostname.match(/\.opinionlab\.com/g)&&(rsids="tescoukgroceriesprod"):1==isDebugMode&&(rsids="UK"===countryAA||location.hostname.match(/\.opinionlab\.com/g)?"tescoukgroceriesdev":"tescointgroceriesdev"),rsids},currencyCode:function(){var currencyCodes={PL:"PLN",HU:"HUF",SK:"EUR",CZ:"CZK",TR:"TRY",MY:"MYR",TH:"THB",CN:"CNY",UK:"GBP"},country=dLPlatformFuncsObj.countryAA();return currencyCodes.hasOwnProperty(country)?currencyCodes[country]:""},appVisitorId:function(){var appvi=_gtm.getQueryParam("appvi");return appvi?_gtm.setCookie(encodeURIComponent(appvi),fpcdp,"s_app_visitor_id"):appvi=(appvi=_gtm.getCookie("s_app_visitor_id"))&&decodeURIComponent(appvi),appvi},appDeviceNameVersion:function(){var dviClean,dviMessy1=_gtm.getQueryParam("dvi");return dviMessy1?(dviMessy2=dviMessy1.replace(/_/g," ").replace(/-/g,"."),dviClean=dviMessy2.replace(/\+/g," "),_gtm.setCookie(encodeURIComponent(dviClean),fpcdp,"s_app_device_name_version")):dviClean=(dviClean=_gtm.getCookie("s_app_device_name_version"))&&decodeURIComponent(dviClean),dviClean},appSiteNamePlatform:function(){var country=dLPlatformFuncsObj.countryAA(),consumer=dLPlatformFuncsObj.appConsumerAA();return"UK"===country?"ghs:app:"+country:consumer.match(/^mca.*/gi)?"mca:app:"+country:"ighs:app:"+country},server:function(){var environment="",environment=document.documentElement.getAttribute("data-app-name")?document.documentElement.getAttribute("data-app-name"):document.documentElement.getAttribute("data-environment");return document.location.host+" ("+environment+")"},customerType:function(){var busCustomerAuthenticated=gtmDataLayer.get("customerData.busCustomerAuthenticated");return busCustomerAuthenticated||(_gtm.getCookie("CID")?"logged in":"anonymous")},siteVersion:function(){var pathname,pos1,path1,pos2,firstPath,domain=document.location.host,country=dLPlatformFuncsObj.countryAA(),site="Unknown site";"CZ"===country&&(pos1=(pathname=location.pathname).indexOf("/",0),pos2=(path1=pathname.substring(pos1)).indexOf("/",1),firstPath=path1.substring(1,pos2),domain=document.location.host+"/"+firstPath);return{SK:"potravinydomov.itesco.sk",PL:"ezakupy.tesco.pl",HU:"bevasarlas.tesco.hu",CZ:"nakup.itesco.cz/groceries",TH:"shoponline.tescolotus.com",MY:"eshop.tesco.com.my",UK:"www.tesco.com"}[country]===domain?site="New site":domain==={SK:"s.itesco.sk",PL:"s.tesco.pl",HU:"s.tesco.hu",CZ:"nakup.itesco.cz/en-GB",TH:"s.tescolotus.com",MY:"s.tesco.com.my",UK:"m.tesco.com"}[country]?site="Old site":domain.match(/ppe|ci-/i)&&(site="Pre-live site"),site},buildNameVersion:function(){var DECountry=dLPlatformFuncsObj.countryAA(),siteVersion=dLPlatformFuncsObj.siteVersion(),siteCode="UK"===DECountry?"ukghs":"ighs";return"New site"===siteVersion||"Pre-live site"===siteVersion?siteCode+":rweb:"+DECountry:"Old site"===siteVersion||"Unknown site"===siteVersion?siteCode+":mweb:"+DECountry:void 0},storeLocationID:function(){var busAddressID=gtmDataLayer.get("customerData.busAddressID"),busSiteStoreId=gtmDataLayer.get("siteData.busSiteStoreId");if(null==document.body.dataset.props)return null!=busAddressID?busSiteStoreId+"-"+busAddressID:busSiteStoreId;var dataprops=JSON.parse(document.body.dataset.props);return dataprops.trolley&&dataprops.trolley.slot&&dataprops.trolley.slot.locationId?dataprops.trolley.slot.locationId:""},storeID:function(){var gtmStoreId="",busSiteStoreId=gtmDataLayer.get("siteData.busSiteStoreId");return busSiteStoreId?gtmStoreId=busSiteStoreId:document.getElementById("configData")&&JSON.parse(document.getElementById("configData").innerHTML).storeId,gtmStoreId},pathNameNoLang:function(){var pathname=location.pathname,regexResult=pathname.match(/\b(?:pl-PL|sk-SK|cs-CZ|hu-HU|th-TH|my-MY|en-GB)\b/gi);if(null==regexResult)return pathname;var langPos2=pathname.indexOf(regexResult)+5,path1=pathname.substring(langPos2);return path1||"/"},marketingEnv:function(){var siteApplication=gtmDataLayer.get("siteData.busSiteApplication"),dataEnvironment=document.documentElement.getAttribute("data-environment");return!isDebugMode&&("prd"==siteApplication||"live"==dataEnvironment||"container"==dataEnvironment)?"prod":"dev"},amobeePixel:function(){return"dev"==dLPlatformFuncsObj.marketingEnv()?"https://d.turn.com/r/dd/id/L21rdC8xNDA3L2NpZC8xNzQ4MjQ1MzU4L3QvMg/":"https://d.turn.com/r/dd/id/L21rdC8xNDA3L2NpZC8xNzQ4MjAyNjg1L3QvMg/"}};gtmDataLayer.set("dLPlatformFuncs",dLPlatformFuncsObj),setTimeout(function(){dataLayer.push({event:"configVars"})},1)}();