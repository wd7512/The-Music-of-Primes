!function(){var globalFunctions=gtmDataLayer.get("dLPlatformFuncs")||{},customEventSetVarsObj=gtmDataLayer.get("customEventSetVars")||{};customEventSetVarsObj.basketInteractAA=function(){var filterSortVarArray,v73,v166,areaIdent,basketOp=gtmDataLayer.get("UIEventBasketOp"),basketProdStr=basketOp.busBasketOpProdString,hasWeighted=basketOp.busBasketOpHasWeighted,anonAdd=basketOp.busBasketOpIsAnon,isOpen=basketOp.busBasketOpIsOpen,searchAdd=basketOp.busBasketOpIsSearch,addType=basketOp.busBasketOpAddType,addToBasketType=basketOp.addToBasketType,seedProduct=basketOp.busBasketOpSeedProductId,isSuggestedProduct=basketOp.busBasketOpIsSPAdd,opIdent=basketOp.busBasketOpAddIdentifier,addAll=basketOp.busBasketOpIsAddAll,linkName=basketOp.busBasketOpLinkName,interactionType=basketOp.busBasketOpInteractionType,engineRendered=gtmDataLayer.get("UIRenderContent.busUIRenderContentEngine")||null,engineClicked=_gtm.sessionStorage.get("clickedEngineStored")||null,listValRendered=gtmDataLayer.get("UIEventBasketOp.busBasketOpSugProdList"),listValClicked=_gtm.sessionStorage.get("clickedItemStored")||null;s.clearVars(),s.products=basketProdStr,s.linkTrackVars="events,products,eVar130",gtmDataLayer.set("UIEventBasketOp.busBasketOpProdString",null),!interactionType||"removeProduct"!=interactionType&&"removeAllProducts"!=interactionType||(s.linkTrackEvents="scRemove,event28,event29",s.events="scRemove,event28,event29","true"==hasWeighted&&(s.events=s.apl(s.events,"event153",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event153",",",1),s.linkTrackVars=s.apl(s.linkTrackVars,"eVar133,eVar134",",",1)),"removeAllProducts"==interactionType&&(s.events=s.apl(s.events,"event9",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event9",",",1)),s.prop4=s.eVar73=gtmDataLayer.get("pageData.v73")),!interactionType||"addProduct"!=interactionType&&"addAllProducts"!=interactionType||(s.linkTrackEvents="scAdd,event26,event27",s.events="scAdd,event26,event27",filterSortVarArray=globalFunctions.filterSortArray(),s.eVar147=filterSortVarArray.v147,s.eVar238=filterSortVarArray.v238,s.eVar239=filterSortVarArray.v239,s.eVar161=filterSortVarArray.v161,s.linkTrackVars=s.apl(s.linkTrackVars,"eVar147,eVar161,eVar238,eVar239",",",1),/^\/groceries\/[a-zA-Z]{2}\-[a-zA-Z]{2}\/products\/.*$/.test(location.pathname)&&"Page"==opIdent||"Side Basket"===opIdent||gtmDataLayer.get("UIEventBasketOp.busBasketOpIsAddAll")||(s.events=s.apl(s.events,"event169",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event169",",",1)),"y"==anonAdd&&(s.events=s.apl(s.events,"event17",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event17",",",1)),"y"==searchAdd&&(s.events=s.apl(s.events,"event55",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event55",",",1)),"true"==hasWeighted&&(s.events=s.apl(s.events,"event152",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event152",",",1),s.linkTrackVars=s.apl(s.linkTrackVars,"eVar135,eVar134",",",1)),!0!==isOpen&&"true"!==isOpen||(s.linkTrackEvents=s.apl(s.linkTrackEvents,"scOpen",",",1),s.events=s.apl(s.events,"scOpen",",",1)),addAll&&(s.linkTrackEvents=s.apl(s.linkTrackEvents,"event46",",",1),s.events=s.apl(s.events,"event46",",",1),gtmDataLayer.set("UIEventBasketOp.busBasketOpIsAddAll",!1)),seedProduct&&(s.linkTrackVars=s.apl(s.linkTrackVars,"eVar151",",",1),s.eVar151=seedProduct),areaIdent="",areaIdent="h"===(v73=gtmDataLayer.get("UIRenderContent.displayArea")||null)?"homepage":"sr"===v73?"search results":"sd"===v73?"department":"d"===v73?"aisle":"a"===v73?"shelf":"p"===v73?"pdp":"so"===v73?"special offers":"f"===v73?"favourites":"bl"===v73?"buylists":gtmDataLayer.get("pageData.v73"),"isSuggestedClicked"==isSuggestedProduct?(s.linkTrackVars=s.apl(s.linkTrackVars,"list2",",",1),s.list2=listValClicked,s.linkTrackVars=s.apl(s.linkTrackVars,"eVar166",",",1),s.eVar166=engineClicked,s.events=s.apl(s.events,"event74",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event74",",",1),s.prop4=s.eVar73=areaIdent):"isSuggested"==gtmDataLayer.get("UIEventBasketOp.busBasketOpIsSPAdd")?(s.linkTrackVars=s.apl(s.linkTrackVars,"list2",",",1),s.list2=listValRendered,s.linkTrackVars=s.apl(s.linkTrackVars,"eVar166",",",1),v166=s.eVar166=engineRendered,s.events=s.apl(s.events,"event74",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event74",",",1)):"isSuggestedDCHPClicked"==isSuggestedProduct&&(s.linkTrackVars=s.apl(s.linkTrackVars,"eVar166",",",1),v166=s.eVar166=engineRendered,s.events=s.apl(s.events,"event74",",",1),s.linkTrackEvents=s.apl(s.linkTrackEvents,"event74",",",1)),s.products="",s.products=basketProdStr,s.eVar61="trex"===v166?areaIdent+addType:addToBasketType+addType,s.prop4=s.eVar73=areaIdent,gtmDataLayer.set("UIRenderContent.displayArea",!1),gtmDataLayer.set("UIEventBasketOp.busBasketOpSugProdList",!1)),s.prop1=s.eVar70=gtmDataLayer.get("pageData.v70"),s.prop2=s.eVar71=gtmDataLayer.get("pageData.v71"),s.prop3=s.eVar72=gtmDataLayer.get("pageData.v72"),s.linkTrackVars=s.apl(s.linkTrackVars,"prop1,prop2,prop3,prop4,prop60,eVar60,eVar61,eVar70,eVar71,eVar72,eVar73",",",1),s.tl(!0,"o",linkName),_gtm.notify("GTM: basketInteraction fired")},gtmDataLayer.set("customEventSetVars",customEventSetVarsObj)}();