var gtmDataLayer="",gtmContainerId="",cookieBannerAvailable=!1,advCookieTrue=!1,expCookieTrue=!1;!function(){var wlh=window.location.hostname,pagePath=window.location.pathname,domain="";/www\.tesco\.com/i.test(wlh)&&/^\/$/i.test(pagePath)?domain="dchp":/\/zones.*/i.test(pagePath)?domain="blocks":/\/groceries\/?/i.test(pagePath)?domain="ghs":/\/phones.*/i.test(pagePath)?domain="knex":/\/account.*/i.test(pagePath)?domain="oneAccount":/payment\.tesco\.com.*/i.test(wlh)&&(domain="bounty"),gtmContainerId={ghs:"GTM-MGZTXQJ",dchp:"GTM-5S7X3K9",blocks:"GTM-T9SFWZH",bounty:"GTM-T8W4LKR",knex:"GTM-P532WFS",oneAccount:"GTM-K2MD6KD",clubcard:"unknown",deliverySaver:"notknown",booker:"not sure",ghsROI:"abc",realfood:"asd",internalPortal:"GTM-KZ6XWJ9",mca:"unknown"}[domain]}(),gtmDataLayer=google_tag_manager[gtmContainerId].dataLayer,cookieBannerAvailable=void 0!==gtmDataLayer.get("cookiePreferences"),advCookieTrue=gtmDataLayer.get("cookiePreferences")&&gtmDataLayer.get("cookiePreferences").advertising,expCookieTrue=gtmDataLayer.get("cookiePreferences")&&gtmDataLayer.get("cookiePreferences").experience,_gtm={getCookie:function(cname){for(var name=cname+"=",ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},getQueryParam:function(name){return name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search),null===results?null:decodeURIComponent(results[1].replace(/\+/g," "))},setCookie:function(value,cdp,key){if(!cookieBannerAvailable||expCookieTrue){var domain="";if(cdp){var last,host=document.location.hostname;if(host&&!/^[0-9.]+$/.test(host)){for(cdp=2<(cdp=parseInt(cdp))?cdp:2,last=host.lastIndexOf(".");0<=last&&1<cdp;cdp--)last=host.lastIndexOf(".",last-1);domain=";domain="+(0<last?host.substring(last):host),domain="ttm-s"===key?";domain="+host:domain}}document.cookie=key+"="+value+domain+"; path=/; SameSite=strict"}},notify:function(description,message){if(description=description||"",message=message||"","1"===_gtm.getCookie("ttm-s"))return console.log(description,message)},sessionStorage:{get:function(item){if(item&&sessionStorage&&sessionStorage.getItem&&sessionStorage.getItem(item))return sessionStorage.getItem(item)},set:function(item,val){item&&val&&sessionStorage&&sessionStorage.setItem&&(!cookieBannerAvailable||cookieBannerAvailable&&expCookieTrue||cookieBannerAvailable&&advCookieTrue)&&(sessionStorage.setItem(item,val),_gtm.notify("sessionStorage set",item))},remove:function(item){item&&sessionStorage&&sessionStorage.removeItem&&sessionStorage.getItem(item)&&(sessionStorage.removeItem(item),_gtm.notify("sessionStorage remove: ",item))}},localStorage:{get:function(item){if(item&&localStorage&&localStorage.getItem&&localStorage.getItem(item))return localStorage.getItem(item)},set:function(item,val){item&&val&&localStorage&&localStorage.setItem&&(!cookieBannerAvailable||cookieBannerAvailable&&expCookieTrue||cookieBannerAvailable&&advCookieTrue)&&(localStorage.setItem(item,val),_gtm.notify("localStorage set: ",item))},remove:function(item){item&&localStorage&&localStorage.removeItem&&localStorage.getItem(item)&&(localStorage.removeItem(item),_gtm.notify("localStorage removed: ",item))}}},function(){var dLGlobalFuncsObj=gtmDataLayer.get("dLGlobalFuncs")||{};dLGlobalFuncsObj.fpcdp=function(){for(var fpcdp="2",tld3cdp=[".com.my",".com.tr",".co.uk"],domain=document.location.hostname,i=0;i<tld3cdp.length;++i)if(-1!==domain.indexOf(tld3cdp[i],domain.length-tld3cdp[i].length)){fpcdp="3";break}return fpcdp};var debugVal,isDebug=_gtm.getQueryParam("gtm-staging");isDebug&&(debugVal="true"==isDebug?"1":"0",_gtm.setCookie(debugVal,dLGlobalFuncsObj.fpcdp(),"ttm-s")),dLGlobalFuncsObj.isDebugMode=function(){return!(!document.querySelector("script[src*=debug]")&&"1"!==_gtm.getCookie("ttm-s"))},gtmDataLayer.set("dLGlobalFuncs",dLGlobalFuncsObj)}();