(window.ESICookieBanner=window.ESICookieBanner||[]).push([[4],{"./src/index.js":function(e,n,o){"use strict";o.r(n);var t=o("./node_modules/@babel/runtime-corejs3/helpers/typeof.js"),s=o.n(t),r=o("./node_modules/@babel/runtime-corejs3/core-js-stable/set-interval.js"),a=o.n(r),c=o("./node_modules/@babel/runtime-corejs3/core-js-stable/set-timeout.js"),i=o.n(c),l=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js"),u=o.n(l),d=o("./node_modules/@babel/runtime-corejs3/regenerator/index.js"),b=o.n(d),p=(o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/assign.js")),j=o.n(p),w=(o("./webpack/dynamic-public-path.js"),o("./src/styles.scss"),o("./src/reducer.js")),h=document.getElementById("pecr-cookie-banner-wrapper"),m=0;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.showModal,t=void 0!==n&&n,s=j()({},w.b,{showModal:t});return Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"./src/components/CookieCapture/CookieCapture.js")).then((function(e){var n=e.default;ReactDOM.render(React.createElement(n,{initialState:s}),h)}))}var v=function(){var e,n,o=Bootstrapper.ensightenOptions,t=window.JLCookieBannerHost||"www.johnlewis.com",s=o.publishPath.split("np")[0],r=u()(e="//".concat(t,"/bootstrap/johnlewis/")).call(e,s,"/bootstrap.html?default=true");delete window.Bootstrapper,delete window.ensBootstraps,n=r,b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(fetch(n).then((function(e){return e.text()})).then((function(e){var n=document.createElement("div");n.innerHTML=e;var o=n.querySelector('[data-assembly-source="ensighten/bootstrap"]'),t=document.createElement("script");t.onload=function(){f({showModal:!0})},t.src=o.src,document.body.appendChild(t)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))},_=function(){i()((function(){void 0!==window.Bootstrapper.isPrivacyDisabled&&!0===window.Bootstrapper.isPrivacyDisabled?(window.PECR={},window.PECR.openModal=function(){v()}):f()}),200)},y=a()((function(){var e="object"===s()(window.React)&&"object"===s()(window.ReactDOM),n=void 0!==window.Bootstrapper;5===m?clearInterval(y):(m++,e&&n&&(clearInterval(y),_()))}),100)},"./src/reducer.js":function(e,n,o){"use strict";o.d(n,"b",(function(){return B}));var t=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js"),s=o.n(t),r=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js"),a=o.n(r),c=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js"),i=o.n(c),l=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/for-each.js"),u=o.n(l),d=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js"),b=o.n(d),p=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js"),j=o.n(p),w=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js"),h=o.n(w),m=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js"),f=o.n(m),v=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js"),_=o.n(v),y=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js"),O=o.n(y),C=o("./node_modules/@babel/runtime-corejs3/helpers/defineProperty.js"),E=o.n(C);function g(e,n){var o=f()(e);if(h.a){var t=h()(e);n&&(t=j()(t).call(t,(function(n){return b()(e,n).enumerable}))),o.push.apply(o,t)}return o}function k(e){for(var n=1;n<arguments.length;n++){var o,t=null!=arguments[n]?arguments[n]:{};if(n%2)u()(o=g(t,!0)).call(o,(function(n){E()(e,n,t[n])}));else if(i.a)a()(e,i()(t));else{var r;u()(r=g(t)).call(r,(function(n){s()(e,n,b()(t,n))}))}}return e}var B={showModal:!1,showCookieBanner:!1,showOverlay:!1,externalModalTrigger:!1,ensighten:{content:{notificationBannerContent:"",consentTitle:"",consentDescription:"",save:"",close:"",cookies:{},cookiePrefix:"JOHNLEWIS_ENSIGHTEN_PRIVACY_"},events:{}},selectedCookieGroups:[]};n.a=function(e,n){var o,t,s;switch(n.type){case"CLOSE_MODAL":return k({},e,{showModal:!1,showCookieBanner:!(e.selectedCookieGroups.length>0)});case"CLOSE_COOKIE_BANNER":return k({},e,{showCookieBanner:!1,showOverlay:!1});case"OPEN_MODAL":return k({},e,{showModal:!0,showCookieBanner:!1});case"OPEN_COOKIE_BANNER":return k({},e,{showCookieBanner:!0});case"SHOW_COOKIE_BANNER":return k({},e,{showCookieBanner:!0,showOverlay:!0});case"SHOW_MODAL":return k({},e,{showModal:!0,showOverlay:!1});case"IMPORT_VIEW":var r=n.view;return k({},e,{views:O()(o=e.views).call(o,r)});case"UPDATE_ENSIGHTEN":return k({},e,{ensighten:{content:k({},e.ensighten.content,{},n.payload.ensighten.content),events:k({},e.ensighten.events,{},n.payload.ensighten.events),ensightenOptions:k({},e.ensighten.ensightenOptions,{},n.payload.ensighten.ensightenOptions),cookieGroups:(s={},_()(t=f()(n.payload.ensighten.content.cookies)).call(t,(function(e){s[e]="Essentials"===e?1:0})),s)},selectedCookieGroups:n.payload.selectedCookieGroups});case"ON_SUBMIT":case"ALLOW_ALL":return k({},e,{showCookieBanner:!1,showModal:!1});default:return e}}},"./src/styles.scss":function(e,n,o){},"./webpack/dynamic-public-path.js":function(e,n){},react:function(e,n){e.exports=React},"react-dom":function(e,n){e.exports=ReactDOM}},[["./src/index.js",5,0]]]);