/* Copyright 2017, SiteSpect, Inc. All Rights Reserved. */
var ss_dom_var=function(){"use strict";var v=1e3;var p=1e3;var o=[];var u=null;var r=[];var e={};var _;var h;var t;var m;var g=false;var y=false;var b=false;var i=[];var w={};var S=[];var E=[];var A;var C={};var O={childList:true,attributes:true,characterData:true,subtree:true};var M="data-ss-variation-applied";var n="(?#i)";var q=function(t){var e=window.SS||{};e.getAsmtData=function(){return t};window.SS=e};q();var a=function(){try{A=new MutationObserver(t)}catch(t){}function t(t){t.forEach(function(t){var e=r(t.target);if(!y&&document.body.contains(e)){var i=n(e);if(i){i.forEach(function(t){o(e,t)})}}});e()}function r(t){var e;var i=t;while(i){if(i.nodeType===Node.ELEMENT_NODE){e=e||i;if(i.getAttribute(M)||E.indexOf(t)>-1){return i}}i=i.parentNode}return e}function e(){E.forEach(function(t,e){if(!document.querySelector("["+M+'="'+e+'"]')){delete E[e];delete S[e]}})}function c(t,e){t.innerHTML=e}function f(e,i){Object.keys(i).forEach(function(t){e.style[t]=i[t]})}function d(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function l(t,e){try{e.apply(t)}catch(t){return false}}function i(t){if(!t.selector){return 0}if(!_(t)){return 0}var e=document.querySelectorAll(t.selector);var i=0;var r;for(r=0;r<e.length;r++){if(g&&typeof __ssedit!=="undefined"&&__ssedit.isVEContent(e[r])){continue}i+=a(e[r],t)}return i}function n(t){var e=t.getAttribute(M);if(e===null){e=E.indexOf(t);if(e===-1){e=E.length;E[e]=t;if(A&&!y){A.observe(t,O)}}t.setAttribute(M,e)}var i=S[e];if(!i){i=S[e]=[]}return i}function a(t,e){var i=n(t);if(i.indexOf(e)===-1){i.push(e);return o(t,e)}return 0}function o(e,t){if(!_(t)){return}var i;var r=(new Date).getTime();var n=0;if(b){return}while(n<t.applied.length&&t.applied[n]+p<r){n++}t.applied.push(r);if(n){t.applied.splice(0,n)}if(t.applied.length>=v){console.warn("Possible infinite loop detected, aborting");return 0}if(g){i=e.ss_revert||e.cloneNode(true)}if(t.html){c(e,t.html)}if(t.css){f(e,t.css)}if(t.attributes){d(e,t.attributes)}if(t.custom){l(e,t.custom)}if(e.hasAttribute("data-sspvid")){var a=document.querySelector(t.selector);if(t.custom&&!a&&t.attributes&&t.attributes["data-sspvid"]){a=document.querySelector('[data-sspvid="'+t.attributes["data-sspvid"]+'"]')}if(a){if(t.custom){var o=["data-sspvid","data-ss-sole-change","data-sspv-control","data-ss-fe-edit-type","data-ss-display-name","data-ss-orig-order","data-ssmid","data-ss-metric-name"];o.forEach(function(t){if(e.hasAttribute(t)){a.setAttribute(t,e.getAttribute(t))}});var s=Array.prototype.slice.call(e.attributes).filter(function(t){return t.name.match(/^data-ss-(?:control-)?reference-node-/)});s.forEach(function(t){a.setAttribute(t.name,t.value)})}if(g){if(i){a.ss_revert=i}if(typeof __ssedit!=="undefined"){__ssedit.outlineEdited(a)}}if(!a.hasAttribute(M)&&e.hasAttribute(M)){a.setAttribute(M,e.getAttribute(M));var u=E.indexOf(e);if(u>-1){E[u]=a}if(A&&!y){A.observe(a,O)}}}}else if(e.hasAttribute("data-ssmid")&&g){if(typeof __ssedit!=="undefined"){__ssedit.outlineEdited(e)}}if(A){A.takeRecords()}return 1}function s(t,e){w[t]=w[t]||0;w[t]+=e;var i="#ssp_history_panel .ss_csf_applied_"+t;var r=document.querySelectorAll(i);for(var n=0;n<r.length;n++){if(w[t]){r[n].style.display="block"}else{r[n].style.display="none"}}}return function(t){var e=0;e=i(t);if(e&&!t.counted&&t.trigger_counted&&!C[t.campaign_id]){t.counted=true;C[t.campaign_id]=true;if(typeof m!=="function"){m=q}h({handler:m,payload:C,target_domain:u})}s(t.id,e);return e}}();function s(t){if(!(t instanceof Array)){t=o}var e=t.map(a).reduce(function(t,e){return t+e},0);return e}function N(t){return!!(t&&t.match(/\(\?#[^)]+_ss-invert\)/))}function c(t){return t.replace(/\(\?#[^)]*\)/g,"")}function T(t){var e=t.indexOf(n)!==-1?"i":"";var i=c(t);return new RegExp(i,e)}function f(t){return typeof t!=="undefined"&&t!==null}_=function(){function a(t){try{return t.script_criterion()}catch(t){return false}}function o(t){var e=!!document.location.hash.match(T(t.hash_criterion));if(N(t.hash_criterion)){e=!e}return e}function s(t){var e=document.location.hash.indexOf("?")+1,i=[""];if(e){i=document.location.hash.substring(e).split("&")}return r(t.hashquery_name_criterion,t.hashquery_value_criterion,i)}function u(t){var e=!!document.location.pathname.match(T(t.path_criterion));if(N(t.path_criterion)){e=!e}return e}function c(t){var e=document.location.search.substring(1).split("&");return r(t.query_name_criterion,t.query_value_criterion,e)}function r(t,e,i){var r=N(t),n=N(e),a=T(t),o=T(e),s,u,c,f,d,l;for(s=0;s<i.length;s++){u=i[s].split("=");c=u.shift();d=!!c.match(a);if(r){d=!d}if(d){f=u.join("=");l=!!f.match(o);if(n){l=!l}if(l){break}}}return d&&l}return function(t){var e,i,r={Path:u,Hash:o,Query:c,HashQuery:s,Custom:a};var n=false;for(e=0;e<t.criteria.length;e++){i=t.criteria[e];if(f(i.GroupNumber)&&n&&f(i.Pre)&&f(t.criteria[i.Pre])&&i.GroupNumber===t.criteria[i.Pre].GroupNumber){continue}n=r[i.Type]&&r[i.Type](i);if(!n){if(!(f(i.GroupNumber)&&f(i.Next)&&f(t.criteria[i.Next])&&i.GroupNumber===t.criteria[i.Next].GroupNumber)){return false}}}return true}}();h=d({target:"/__ssobj/asmt_update"});t=d({target:"/__ssobj/api",alterRequest:function(t){t.setRequestHeader("X-SiteSpect-CSM-Url",window.location.href)}});function d(t){t=t||{};var r=t.target;var n=t.alterRequest;var e;var i=100;var a;var o;var s;function u(){d();var t=JSON.stringify(a),e=new XMLHttpRequest;if(s){s=s.replace(/\/$/,"")}var i=s?s+r:r;e.open("POST",i);if(n){n(e)}e.setRequestHeader("Content-Type","application/json;charset=UTF-8");e.withCredentials=true;e.addEventListener("load",c,false);e.send(t)}function c(t){var e;try{e=JSON.parse(t.target.response);if(typeof o==="function"){o(e,this)}l(e,0)}catch(t){}}function f(t){if(t&&e){d()}else if(e){return}e=setTimeout(u,i)}function d(){clearTimeout(e);e=null}return function(t){o=t.handler;a=t.payload;s=t.target_domain;if(!e){f()}}}function l(e,t){if(typeof window.__sscCSFCountStatusChange==="undefined"&&t<5){setTimeout(function(){l(e,t+1)},1e3)}else{if(typeof window.__sscCSFCountStatusChange!=="undefined"){window.__sscCSFCountStatusChange.forEach(function(t){t(e)})}}}function R(t){setTimeout(function(){y=!!t.is_ve_edit_mode},5e3)}function x(t){if(t){o=t.variations||o;e=t.timestamps||e;R(t);g=!!t.is_ve_edit_mode;u=t.current_domain}o.forEach(function(t){t.applied=t.applied||[]});i.forEach(function(t){t(o)})}function k(t){r=t?t.metrics||r:r}function V(t){i.push(t);t(o)}function L(t){return w[t]||0}function D(t){m=t}x(window.__ss_variations);k(window.__ss_variations);document.addEventListener("ready",function(){if(!o.length){x(window.__ss_variations)}if(!r.length){k(window.__ss_variations)}},false);function H(){if(g){b=true}}function j(){if(g){b=false}}function G(t){var i=t.identifying_attr_key;var r=t.identifying_attr_val;var n=t.identifying_script_content_regex;var a=t.new_selector;if(!g){return}Object.keys(o).forEach(function(t){var e=o[t];if(i&&e.attributes&&e.attributes[i]&&e.attributes[i]===r||n&&e.custom&&e.custom.toString().match(n)){e.selector=a}})}function P(i){var t=true;if(o.length&&!y){var r=i.getAttribute("data-sspvid");if(r){t=o.some(function(t){if(t.attributes&&t.attributes["data-sspvid"]===r){var e=i.getAttribute("data-ss-fe-edit-type")==="frontend_order";return!t.custom||e}})}}return t}function F(t){var e=[];var i={visits:[{AsmtCounted:[],Data:{}}]};t.forEach(function(t){i.visits[0].Data[t.id]={Hits:1};if(t.trigger_counting){t.vg_ids.forEach(function(t){if(e.indexOf(t)<=-1){e.push(t)}})}});if(e.length>0){i.visits[0].AsmtCounted=e}return i}function I(){var e=[];var i=false;r.forEach(function(t){if(_(t)){e.push(t);if(t.trigger_counting&&t.tc_ids&&t.tc_ids instanceof Array){t.tc_ids.forEach(function(t){if(!C[t]){C[t]=true;i=true}})}}});if(e.length>0){t({handler:function(t,e){function i(e,t){if(typeof window.__ssmCSMetricResponseReadyChange==="undefined"&&t<5){setTimeout(function(){i(e,t+1)},1e3)}else{if(typeof window.__ssmCSMetricResponseReadyChange!=="undefined"){window.__ssmCSMetricResponseReadyChange.forEach(function(t){t(e.getResponseHeader("SiteSpect-Metrics-Info"))})}}}i(e,0)},payload:F(e),target_domain:u});if(i){h({target_domain:u})}}}return{applyVariations:s,applySingleVariation:a,setVariations:x,setMetrics:k,registerVariationWatcher:V,checkVariationApplied:L,setAsmtCallback:D,pauseVariations:H,unpauseVariations:j,updateVariationSelector:G,isSafeToEdit:P,evaluateMetrics:I}}();(function(){"use strict";function e(e){var t={childList:true,attributes:true,subtree:true};var i;var r;var n;var a=e.callback;var o=document.querySelector("html");if(o){if(window.MutationObserver){r=new MutationObserver(c);i=o;n=r.observe.bind(r,i,t);n()}else{s(o)}}function s(t){t.addEventListener("DOMSubtreeModified",f,false)}function u(t){t.removeEventListener("DOMSubtreeModified",f,false)}function c(){if(r){r.disconnect()}var t=document.querySelectorAll(e.selector);if(t.length>0){a()}if(n){n()}}function f(){u(o);c();s(o)}}ss_dom_var.registerVariationWatcher(function(t){t.forEach(function(t){e({selector:t.selector,callback:ss_dom_var.applySingleVariation.bind(ss_dom_var,t)})})});var t=null;setInterval(function(){if(t===null||t!==window.location.href){t=window.location.href;ss_dom_var.evaluateMetrics()}},500)})();
/* Copyright 2016, SiteSpect, Inc. All Rights Reserved. */
if(!window.SS){window.SS={}}SS.SPA=function(){"use strict";var n=1;var i=document.querySelectorAll.bind(document);function t(t){var o={childList:true,attributes:true};var c;var u;var f="ss-modified-"+n++;var s=e.bind(null,t.dynamicContainer,f);var d;var l=t.callback||t.callbackFunction;if(i(t.staticContainer).length>0){if(window.MutationObserver){if(t.watchSubtree){o.subtree=true}u=new MutationObserver(S);c=i(t.staticContainer)[0];d=u.observe.bind(u,c,o);d()}else{a(i(t.staticContainer),v)}if(t.runCallbackNow){l()}}function v(n){n.addEventListener("DOMSubtreeModified",w,false)}function b(n){n.removeEventListener("DOMSubtreeModified",w,false)}function S(){if(u){u.disconnect()}var n=s(true);if(n.length>0){a(n,r.bind(null,f));l()}if(d){d()}}function w(){a(i(t.staticContainer),b);S();a(i(t.staticContainer),v)}}function e(n,t,e){var a=[n];if(e){a.push(":not(."+t+")")}return i(a.join(""))}function a(n,i){[].forEach.call(n,i)}function r(n,i){if(i.className.indexOf(n)===-1){i.className+=" "+n}}return{dynamicModify:t}}();